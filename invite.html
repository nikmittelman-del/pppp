<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>××™×©×•×¨ ×¤×’×™×©×” - The Inner Space</title>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600&family=Amatic+SC:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #1d3557;
            --accent: #b5838d;
            --soft-blue: #a8dadc;
            --bg-glass: rgba(255, 255, 255, 0.88);
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Assistant', sans-serif;
            background: #f1faee;
            overflow: hidden;
        }

        /* ×¨×§×¢ ×¡×¤× ××¨×’×™×¢ ×‘×ª× ×•×¢×” */
        .spa-background {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-image: linear-gradient(rgba(255,255,255,0.3), rgba(255,255,255,0.3)), 
                              url('https://images.unsplash.com/photo-1544161516-0975e54d7285?q=80&w=1600');
            background-size: cover;
            background-position: center;
            z-index: -1;
            animation: slowPan 25s infinite alternate linear;
        }

        @keyframes slowPan { from { transform: scale(1); } to { transform: scale(1.15); } }

        /* ×›×¨×˜×™×¡ ×”×–×›×•×›×™×ª */
        .glass-card {
            background: var(--bg-glass);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border-radius: 40px;
            padding: 45px 35px;
            width: 90%;
            max-width: 500px;
            text-align: center;
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
            border: 1px solid rgba(255,255,255,0.5);
            transition: transform 0.3s ease;
        }

        .header-top {
            font-family: 'Amatic SC', cursive;
            font-size: 2.4rem;
            color: var(--accent);
            margin: 0;
        }

        h1 { color: var(--primary); font-weight: 600; font-size: 1.8rem; margin: 10px 0 20px; }

        .clinic-desc {
            font-size: 1.05rem;
            line-height: 1.7;
            color: #444;
            margin-bottom: 25px;
            font-weight: 300;
        }

        .appointment-box {
            background: rgba(168, 218, 220, 0.25);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            border: 1px solid var(--soft-blue);
        }

        .date { display: block; font-size: 1.4rem; font-weight: 600; color: var(--primary); }
        .address { display: block; font-size: 1.1rem; color: #555; margin-top: 8px; }

        .cta-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 20px 35px;
            border-radius: 60px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            box-shadow: 0 10px 20px rgba(29, 53, 87, 0.2);
        }

        .cta-btn:hover { 
            transform: translateY(-3px); 
            box-shadow: 0 15px 30px rgba(29, 53, 87, 0.3);
            background: #2a4a75;
        }

        .waze-btn {
            background: #33ccff;
            margin-top: 15px;
        }

        /* ××¡×š ×”×¦×œ×—×” */
        #success-screen { display: none; animation: fadeIn 0.6s ease forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .footer-info { margin-top: 20px; font-size: 0.8rem; color: #888; }
    </style>
</head>
<body>

<div class="spa-background"></div>

<div class="glass-card">
    <div id="invite-content">
        <p class="header-top">The Inner Space</p>
        <h1>××¨×—×‘ ×œ× ×©×™××” ×•×¦××™×—×”</h1>
        
        <div class="clinic-desc">
            ×”×§×œ×™× ×™×§×” ×××•×§××ª ×‘×œ×‘ × ×ª× ×™×” ×•××”×•×•×” ××™ ×©×œ ×©×œ×•×•×”. ×× ×• ××–××™× ×™× ××•×ª×š ×œ×¤× ×•×ª ×¨×’×¢ ×œ×¢×¦××š ×•×œ×”×’×™×¢ ×œ××¤×’×© ×”××©×•×ª×£ ×©×œ× ×•.
        </div>

        <div class="appointment-box">
            <span class="date" id="tomorrowDate">×˜×•×¢×Ÿ ×ª××¨×™×š...</span>
            <span class="time" style="font-weight: 600; color: var(--accent); font-size: 1.2rem;">×‘×©×¢×” 19:00</span>
            <span class="address">ğŸ“ ×”×¨×¦×œ 53, × ×ª× ×™×”</span>
        </div>

        <button class="cta-btn" id="confirmBtn" onclick="handleConfirmation()">××©×¨/×™ ×”×’×¢×” ×•×¡× ×›×¨× /×™ ×œ×™×•××Ÿ</button>
        <p class="footer-info">×”×œ×—×™×¦×” ×ª×©×œ×— ××™×©×•×¨ ×œ××˜×¤×œ ×•×ª×¤×ª×— ××ª ×”×™×•××Ÿ</p>
    </div>

    <div id="success-screen">
        <span style="font-size: 4rem;">âœ¨</span>
        <h2 style="color: var(--primary);">×”×”×’×¢×” ××•×©×¨×” ×‘×”×¦×œ×—×”</h2>
        <p>×¤×¨×˜×™ ×”×¤×’×™×©×” ×•×”××™×§×•× × ×©××¨×• ×‘×™×•××Ÿ ×©×œ×š.</p>
        <button class="cta-btn waze-btn" onclick="window.location.href='https://waze.com/ul?q=×”×¨×¦×œ%2053%20× ×ª× ×™×”'">
            × ×™×•×•×˜ ×œ×›×ª×•×‘×ª ×‘-Waze ğŸš—
        </button>
    </div>
</div>

<script>
    // ×”×’×“×¨×ª Webhook ×œ×©×œ×™×—×ª ×”×ª×¨××” ××œ×™×š
    const WEBHOOK_URL = "https://webhook.site/dac7fc7d-905f-4583-97f3-1b3ee8c5b614";

    // ×”×’×“×¨×ª ×ª××¨×™×š ××—×¨
    const tomorrow = new Date();
    tomorrow.setDate(tomorrow.getDate() + 1);
    const dateOptions = { weekday: 'long', day: 'numeric', month: 'long' };
    document.getElementById('tomorrowDate').innerText = tomorrow.toLocaleDateString('he-IL', dateOptions);

    function handleConfirmation() {
        // 1. ×©×™× ×•×™ ×”×××©×§ ×•×™×–×•××œ×™×ª
        const btn = document.getElementById('confirmBtn');
        btn.innerText = "×©×•×œ×— ××™×©×•×¨...";
        btn.disabled = true;

        // 2. ×©×œ×™×—×ª ×”×ª×¨××” ×œ-Webhook ×©×œ×š
        fetch(WEBHOOK_URL, {
            method: 'POST',
            mode: 'no-cors', // ××‘×˜×™×— ×©×”×©×œ×™×—×” ×ª×¦× ×’× ×× ×™×© ×”×’×‘×œ×•×ª ×“×¤×“×¤×Ÿ
            body: JSON.stringify({
                status: "APPROVED",
                location: "Herzl 53, Netanya",
                time: "19:00",
                date: tomorrow.toLocaleDateString('he-IL'),
                message: "×”××˜×•×¤×œ ××™×©×¨ ×”×’×¢×” ×“×¨×š ×”×¤×œ×™×™×¨ ×”××™× ×˜×¨××§×˜×™×‘×™"
            })
        }).then(() => {
            console.log("Notification sent successfully");
        }).catch(err => console.log("Fetch error:", err));

        // 3. ×”×¦×’×ª ××¡×š ×”×¦×œ×—×”
        setTimeout(() => {
            document.getElementById('invite-content').style.display = 'none';
            document.getElementById('success-screen').style.display = 'block';
        }, 800);
        
        // 4. ×™×¦×™×¨×ª ×§×•×‘×¥ ×™×•××Ÿ ×œ×”×•×¨×“×” ×œ××˜×•×¤×œ
        createCalendarFile();
    }

    function createCalendarFile() {
        const year = tomorrow.getFullYear();
        const month = String(tomorrow.getMonth() + 1).padStart(2, '0');
        const day = String(tomorrow.getDate()).padStart(2, '0');
        const startTime = `${year}${month}${day}T190000`;
        const endTime = `${year}${month}${day}T200000`;

        const icsContent = [
            "BEGIN:VCALENDAR",
            "VERSION:2.0",
            "BEGIN:VEVENT",
            "SUMMARY:×¤×’×™×©×ª ×˜×™×¤×•×œ - The Inner Space",
            "DTSTART:" + startTime,
            "DTEND:" + endTime,
            "DESCRIPTION:××¤×’×© ××™×©×™ ×‘×§×œ×™× ×™×§×”. × × ×œ×”×’×™×¢ 5 ×“×§×•×ª ×œ×¤× ×™.",
            "LOCATION:×”×¨×¦×œ 53, × ×ª× ×™×”",
            "END:VEVENT",
            "END:VCALENDAR"
        ].join("\n");

        const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });
        const link = document.createElement('a');
        link.href = window.URL.createObjectURL(blob);
        link.setAttribute('download', 'clinic_appointment.ics');
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    }
</script>

</body>
</html>